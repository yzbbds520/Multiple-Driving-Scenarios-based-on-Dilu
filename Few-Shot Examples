# Prompting with Few-Shot Examples

To ground the LLM's reasoning and guide it towards making safe and logical decisions, we employ a few-shot prompting strategy. The examples are not static; they are dynamically retrieved from a vector database called `DrivingMemory` based on the semantic similarity to the current driving scenario.

These retrieved memories fall into two main categories:

1.  **Standard Success Examples**: These are records of previously successful decisions, demonstrating a direct and effective chain of thought.
2.  **Corrected Failure Examples**: These are more sophisticated examples generated by our `ReflectionAgent` after a failure (e.g., a collision). They contain an analysis of the past mistake and a corrected reasoning process, effectively teaching the agent to avoid similar errors in the future.

## 2.1 Type 1: Standard Success Example

This type of example provides a clean, straightforward demonstration of the desired reasoning process.

### Human Message (Input)

```python
# This is a canonical example of a scenario description.
delimiter = "####"
example_message = f"""
{delimiter} Driving scenario description:
You are driving on a road with 4 lanes, and you are currently driving in the second lane from the left. Your speed is 25.00 m/s, acceleration is 0.00 m/s^2, and lane position is 363.14 m. 
There are other vehicles driving around you, and below is their basic information:
- Vehicle `912` is driving on the same lane of you and is ahead of you. The speed of it is 23.30 m/s, acceleration is 0.00 m/s^2, and lane position is 382.33 m.
- Vehicle `864` is driving on the lane to your right and is ahead of you. The speed of it is 21.30 m/s, acceleration is 0.00 m/s^2, and lane position is 373.74 m.
- Vehicle `488` is driving on the lane to your left and is ahead of you. The speed of it is 23.61 $m/s$, acceleration is 0.00 $m/s^2$, and lane position is 368.75 $m$.

{delimiter} Your available actions:
IDLE - remain in the current lane with current speed Action_id: 1
Turn-left - change lane to the left of the current lane Action_id: 0
Turn-right - change lane to the right of the current lane Action_id: 2
Acceleration - accelerate the vehicle Action_id: 3
Deceleration - decelerate the vehicle Action_id: 4
"""
